<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profesyonel Sesli Stok AsistanÄ±</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:white;
    text-align:center;
    padding:20px;
}
button{
    font-size:20px;
    padding:18px;
    border-radius:14px;
    border:none;
    background:#22c55e;
    color:white;
    width:90%;
    max-width:400px;
    margin-top:25px;
}
#response{
    margin-top:30px;
    font-size:18px;
    background:#1e293b;
    padding:20px;
    border-radius:14px;
    min-height:80px;
}
</style>
</head>
<body>

<h2>ðŸŽ¤ Profesyonel Sesli Stok AsistanÄ±</h2>
<button onclick="startListening()">KonuÅŸ</button>
<div id="response">HazÄ±rÄ±m...</div>

<script>

// ======================
// TÃœM TABLO (KG)
// ======================
const stockData = {

"BIM":{
"KIMYON":20000,
"HINDISTAN CEVIZI":30000,
"NANE":10000,
"SUSAM":25000,
"TARCIN":10000,
"COREKOTU":15000,
"PUL BIBER":80000,
"KARABIBER":30000,
"ACI TOZ BIBER":15000,
"TATLI TOZ BIBER":15000,
"KEKIK":15000,
"GALETA UNU":150000,
"MISIR UNU":150000
},

"FILE":{
"KARABIBER":3000,
"TARCIN":3000,
"ZERDECAL":3000,
"KEKIK":5000,
"ISOT":10000
},

"METRO":{
"TATLI TOZ BIBER":1000,
"CILEKLI PUDING":2000,
"COREKOTU":1000,
"HINDISTAN CEVIZI":2000,
"ISOT":1500,
"KAKAOLU PUDING":5000,
"KARABIBER":5000,
"KARANFIL":250,
"KEKIK":2500,
"KIMYON":3000,
"KORI":1000,
"KUS UZUMU":1000,
"LIMON TUZU":3000,
"MAVI HASHAS":500,
"MUZLU PUDING":2000,
"NANE":3000,
"PANKO":15000,
"PUL BIBER":20000,
"TOZ SARIMSAK":1000,
"SUMAK":3000,
"SUSAM":2000,
"TANE KARABIBER":500,
"TARCIN":300,
"TEMPURA UNU":500,
"VANILYALI PUDING":1000,
"YENIBAHAR":250,
"ZERDECAL":500
},

"KNORR":{
"COREKOTU":2000,
"HINDISTAN CEVIZI":2000,
"KARABIBER":5000,
"KARANFIL":500,
"KEKIK":2500,
"KIMYON":3000,
"KORI":2000,
"NANE":2000,
"PANKO":5000,
"PUL BIBER":5000,
"TARCIN":2000,
"TATLI TOZ BIBER":5000,
"ZENCEFIL":2000,
"ZERDECAL":3000
}

};

// ======================
// NORMALÄ°ZASYON
// ======================
function normalize(text){
return text
.toUpperCase()
.replace(/Ã‡/g,"C")
.replace(/Äž/g,"G")
.replace(/Ä°/g,"I")
.replace(/Åž/g,"S")
.replace(/Ã–/g,"O")
.replace(/Ãœ/g,"U")
.replace(/[^A-Z0-9 ]/g,"")
}

// ======================
// SES TANIMA
// ======================
function startListening(){
const recognition = new(window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang="tr-TR";
recognition.start();
recognition.onresult=function(event){
let text = event.results[0][0].transcript;
processCommand(text);
}
}

// ======================
// SESLENDÄ°RME
// ======================
function speak(text){
const speech = new SpeechSynthesisUtterance(text);
speech.lang="tr-TR";
speechSynthesis.speak(speech);
}

// ======================
// KOMUT MOTORU
// ======================
function processCommand(rawText){

let text = normalize(rawText);
document.getElementById("response").innerText="AlgÄ±lanan: "+rawText;

if(text.includes("MERHABA")){
let cevap="Merhaba. Hangi firma ve Ã¼rÃ¼n iÃ§in iÅŸlem yapmak istiyorsunuz?";
speak(cevap);
return;
}

if(text.includes("TESSEKKUR")){
let cevap="Rica ederim. BaÅŸka bir Ã¼rÃ¼n kontrol etmek ister misiniz?";
speak(cevap);
return;
}

let firm=null;
["BIM","FILE","METRO","KNORR"].forEach(f=>{
if(text.includes(f)) firm=f;
});

if(!firm){
speak("Firma ismini anlayamadÄ±m.");
return;
}

let product=null;
Object.keys(stockData[firm]).forEach(p=>{
if(text.includes(p)) product=p;
});

if(!product){
speak("Urunu anlayamadim.");
return;
}

let minimum=stockData[firm][product];

// minimum sorgusu
if(text.includes("MINIMUM") || text.includes("KAPASITE")){
let ton=(minimum/1000);
let cevap=firm+" "+product+" minimum kapasitesi "+ton+" ton.";
document.getElementById("response").innerText=cevap;
speak(cevap);
return;
}

// stok hesaplama
let tonMatch=text.match(/(\d+)\s*TON/);
let kgMatch=text.match(/(\d+)\s*KG/);

let mevcutKg=0;

if(tonMatch){
mevcutKg=parseInt(tonMatch[1])*1000;
}
else if(kgMatch){
mevcutKg=parseInt(kgMatch[1]);
}

if(mevcutKg>0){

if(mevcutKg>=minimum){
let cevap="Stok yeterli. Siparis gerekmiyor.";
document.getElementById("response").innerText=cevap;
speak(cevap);
}
else{
let siparisKg=minimum-mevcutKg;
let siparisTon=(siparisKg/1000).toFixed(2);
let cevap=siparisTon+" ton siparis vermelisiniz.";
document.getElementById("response").innerText=cevap;
speak(cevap);
}
return;
}

speak("Komutu tam anlayamadim. Minimum mu yoksa siparis hesabi mi yapmak istiyorsunuz?");

}

</script>
</body>
</html>
