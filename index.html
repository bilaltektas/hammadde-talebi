<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profesyonel Stok Asistanƒ±</title>
<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI;
background:linear-gradient(135deg,#0f172a,#1e293b);
color:white;
text-align:center
}
h1{margin-top:20px}
.container{max-width:1100px;margin:auto;padding:20px}
.card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(15px);
border-radius:20px;
padding:20px;
margin-top:20px;
box-shadow:0 0 40px rgba(0,0,0,0.4)
}
button{
padding:15px;
margin:10px;
border:none;
border-radius:12px;
background:#2563eb;
color:white;
font-size:16px;
min-width:140px
}
button:hover{background:#1d4ed8}
#productList{
max-height:250px;
overflow:auto;
text-align:left;
margin-top:15px;
font-size:14px
}
#result{
font-size:42px;
font-weight:800;
margin-top:20px
}
.red{color:#ef4444}
.green{color:#22c55e}
.blink{animation:blink 1s infinite}
@keyframes blink{0%{opacity:1}50%{opacity:.3}100%{opacity:1}}
.hidden{display:none}
</style>
</head>
<body>

<h1>üéôÔ∏è Kurumsal Stok Asistanƒ±</h1>

<div class="container">

<div class="card" id="firmaSecim">
<p><b>Hangi firma ile i≈ülem yapmak istiyorsunuz?</b></p>
<button onclick="selectFirma('BIM')">Bƒ∞M</button>
<button onclick="selectFirma('FILE')">Fƒ∞LE</button>
<button onclick="selectFirma('METRO')">METRO</button>
<button onclick="selectFirma('KNORR')">KNORR</button>
</div>

<div class="card hidden" id="islemPanel">
<h3 id="firmaBaslik"></h3>
<div id="productList"></div>
<button onclick="askProduct()">Soru Sor</button>
<button onclick="startListening()" id="cevapBtn" class="hidden">Cevap Ver</button>
</div>

<div class="card">
<div id="result"></div>
</div>

</div>

<script>

let currentFirma=null
let currentUrun=null
let state="idle"

const data=[

// Bƒ∞M
{firma:"BIM",urun:"KIMYON",min:20000},
{firma:"BIM",urun:"HINDISTAN CEVIZI",min:30000},
{firma:"BIM",urun:"NANE",min:10000},
{firma:"BIM",urun:"SUSAM",min:25000},
{firma:"BIM",urun:"TARCIN",min:10000},
{firma:"BIM",urun:"COREKOTU",min:15000},
{firma:"BIM",urun:"PUL BIBER",min:80000},
{firma:"BIM",urun:"KARABIBER",min:30000},
{firma:"BIM",urun:"ACI TOZ BIBER",min:15000},
{firma:"BIM",urun:"TATLI TOZ BIBER",min:15000},
{firma:"BIM",urun:"KEKIK",min:15000},
{firma:"BIM",urun:"GALETA UNU",min:150000},
{firma:"BIM",urun:"MISIR UNU",min:150000},

// Fƒ∞LE
{firma:"FILE",urun:"KARABIBER",min:3000},
{firma:"FILE",urun:"TARCIN",min:3000},
{firma:"FILE",urun:"ZERDECAL",min:3000},
{firma:"FILE",urun:"KEKIK",min:5000},
{firma:"FILE",urun:"ISOT",min:10000},

// METRO
{firma:"METRO",urun:"TATLI TOZ BIBER",min:1000},
{firma:"METRO",urun:"CILEKLI PUDING",min:2000},
{firma:"METRO",urun:"COREK OTU",min:1000},
{firma:"METRO",urun:"HINDISTAN CEVIZI",min:2000},
{firma:"METRO",urun:"ISOT",min:1500},
{firma:"METRO",urun:"KAKAOLU PUDING",min:5000},
{firma:"METRO",urun:"KARABIBER",min:5000},
{firma:"METRO",urun:"KARANFIL",min:250},
{firma:"METRO",urun:"KEKIK",min:2500},
{firma:"METRO",urun:"KIMYON",min:3000},
{firma:"METRO",urun:"KORI",min:1000},
{firma:"METRO",urun:"KUS UZUMU",min:1000},
{firma:"METRO",urun:"LIMON TUZU",min:3000},
{firma:"METRO",urun:"MAVI HASHAS",min:500},
{firma:"METRO",urun:"MUZLU PUDING",min:2000},
{firma:"METRO",urun:"NANE",min:3000},
{firma:"METRO",urun:"PANKO (3004)",min:15000},
{firma:"METRO",urun:"PUL BIBER",min:20000},
{firma:"METRO",urun:"TOZ SARIMSAK",min:1000},
{firma:"METRO",urun:"SUMAK",min:3000},
{firma:"METRO",urun:"SUSAM",min:2000},
{firma:"METRO",urun:"TANE KARABIBER",min:500},
{firma:"METRO",urun:"TARCIN",min:300},
{firma:"METRO",urun:"TEMPURA UNU",min:500},
{firma:"METRO",urun:"VANILYALI PUDING",min:1000},
{firma:"METRO",urun:"YENIBAHAR",min:250},
{firma:"METRO",urun:"TOZ ZERDECAL",min:500},

// KNORR
{firma:"KNORR",urun:"HINDISTAN CEVIZI",min:2000},
{firma:"KNORR",urun:"KARABIBER",min:5000},
{firma:"KNORR",urun:"KEKIK",min:2500},
{firma:"KNORR",urun:"KIMYON",min:3000},
{firma:"KNORR",urun:"NANE",min:2000},
{firma:"KNORR",urun:"KNORR PANKO (3002)",min:5000},
{firma:"KNORR",urun:"KNORR PUL BIBER",min:5000},
{firma:"KNORR",urun:"TATLI TOZ BIBER",min:5000},
{firma:"KNORR",urun:"ZENCEFIL",min:2000},
{firma:"KNORR",urun:"ZERDECAL",min:3000}
]

function normalize(t){
return t.toUpperCase()
.replace(/ƒ∞/g,"I")
.replace(/≈û/g,"S")
.replace(/ƒû/g,"G")
.replace(/√ú/g,"U")
.replace(/√ñ/g,"O")
.replace(/√á/g,"C")
.replace(/[^A-Z0-9 ]/g,"")
}

function speak(t){
speechSynthesis.cancel()
let u=new SpeechSynthesisUtterance(t)
u.lang="tr-TR"
speechSynthesis.speak(u)
}

function selectFirma(f){
currentFirma=f
document.getElementById("islemPanel").classList.remove("hidden")
document.getElementById("firmaBaslik").innerText="Se√ßilen Firma: "+f
listProducts()
speak(f+" firmasƒ± se√ßildi. √úr√ºn listesini inceleyebilirsiniz.")
}

function listProducts(){
let list=data.filter(d=>d.firma===currentFirma)
let html="<b>Bu firmaya ait √ºr√ºnler:</b><br>"
list.forEach(p=>{
html+=p.urun+" (Min: "+p.min+" kg)<br>"
})
document.getElementById("productList").innerHTML=html
}

function askProduct(){
state="urun"
document.getElementById("cevapBtn").classList.remove("hidden")
speak("Hangi hammaddeyi sormak istiyorsunuz?")
}

function startListening(){
const SR=window.SpeechRecognition||window.webkitSpeechRecognition
if(!SR){alert("Tarayƒ±cƒ± desteklemiyor");return}
let r=new SR()
r.lang="tr-TR"
r.start()
r.onresult=e=>{
process(e.results[0][0].transcript)
}
}

function process(text){
let n=normalize(text)

if(state==="urun"){
let clean=n.replace(/\s+/g,"")
let match=data.find(d=>d.firma===currentFirma && clean.includes(d.urun.replace(/\s+/g,"")))
if(!match){speak("Hammadde bulunamadƒ±.");return}
currentUrun=match.urun
state="stok"
speak(currentUrun+" i√ßin depodaki stok miktarƒ± nedir?")
return
}

if(state==="stok"){
let kg=parseQuantity(n)
if(kg==null){speak("Miktar anla≈üƒ±lamadƒ±.");return}
let rec=data.find(d=>d.firma===currentFirma && d.urun===currentUrun)
let min=rec.min
let result=document.getElementById("result")

if(kg<min){
let need=min-kg
let ton=need/1000
result.className="red blink"
result.innerHTML=formatDisplayTon(ton)+" Sƒ∞PARƒ∞≈û VERMELƒ∞Sƒ∞N"
speak(formatSpeechTon(ton)+" sipari≈ü vermelisin")
}else{
result.className="green"
result.innerHTML="STOK YETERLƒ∞"
speak("Stok yeterli")
}
state="idle"
}
}

function parseQuantity(text){
let num=text.match(/(\d+(\.\d+)?)/)
if(!num)return null
let val=parseFloat(num[0])
if(text.includes("TON"))return val*1000
return val
}

function formatDisplayTon(ton){
if(ton%1===0)return ton+" TON"
if(ton%1===0.5)return Math.floor(ton)+" BU√áUK TON"
return ton.toFixed(1)+" TON"
}

function formatSpeechTon(ton){
if(ton%1===0)return ton+" ton"
if(ton%1===0.5)return Math.floor(ton)+" bu√ßuk ton"
return Math.round(ton*1000)+" kilogram"
}

</script>
</body>
</html>
