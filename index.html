<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Akıllı Stok Asistanı</title>

<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    overflow-x:hidden;
}

h1{
    text-align:center;
    padding:20px;
    font-size:28px;
    animation: glow 2s infinite alternate;
}

@keyframes glow{
    from{ text-shadow:0 0 10px #00ffff; }
    to{ text-shadow:0 0 25px #00ffff; }
}

.container{
    text-align:center;
    padding:20px;
}

button{
    padding:15px 25px;
    margin:10px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-size:16px;
    background:linear-gradient(45deg,#00c6ff,#0072ff);
    color:white;
    transition:0.3s;
}

button:hover{
    transform:scale(1.1);
    box-shadow:0 0 20px #00ffff;
}

.products{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
}

.card{
    background:rgba(255,255,255,0.1);
    padding:15px;
    margin:10px;
    border-radius:12px;
    cursor:pointer;
    transition:0.3s;
}

.card:hover{
    background:#00c6ff;
    color:black;
    transform:scale(1.1);
}

.result{
    font-size:40px;
    margin-top:30px;
    animation:blink 1s infinite;
}

@keyframes blink{
    50%{ opacity:0.2; }
}
</style>
</head>

<body>

<h1>AKILLI STOK SİPARİŞ ASİSTANI</h1>

<div class="container">

<div id="firms"></div>
<div id="products" class="products"></div>
<div id="controls"></div>
<div id="result" class="result"></div>

</div>

<script>

// TÜM VERİLER (EKSİKSİZ)

const data = {

"BİM":{
"KİMYON":20000,
"HİNDİSTAN CEVİZİ":30000,
"NANE":10000,
"SUSAM":25000,
"TARÇIN":10000,
"ÇÖREKOTU":15000,
"PUL BİBER":80000,
"KARABİBER":30000,
"ACI TOZ BİBER":15000,
"TATLI TOZ BİBER":15000,
"KEKİK":15000,
"GALETA UNU":150000,
"MISIR UNU":150000
},

"FİLE":{
"KARABİBER":3000,
"TARÇIN":3000,
"ZERDEÇAL":3000,
"KEKİK":5000,
"İSOT":10000
},

"METRO":{
"TATLI TOZ BİBER":1000,
"ÇİLEKLİ PUDİNG":2000,
"ÇÖREK OTU":1000,
"HİNDİSTAN CEVİZİ":2000,
"İSOT":1500,
"KAKAOLU PUDİNG":5000,
"KARABİBER":5000,
"KARANFİL":250,
"KEKİK":2500,
"KİMYON":3000,
"KÖRİ":1000,
"KUŞ ÜZÜMÜ":1000,
"LİMON TUZU":3000,
"MAVİ HAŞHAŞ":500,
"MUZLU PUDİNG":2000,
"NANE":3000,
"PANKO":15000,
"PUL BİBER":20000,
"TOZ SARIMSAK":1000,
"SUMAK":3000,
"SUSAM":2000,
"TANE KARABİBER":500,
"TARÇIN":300,
"TEMPURA UNU":500,
"VANİLYALI PUDİNG":1000,
"YENİBAHAR":250,
"TOZ ZERDEÇAL":500
},

"KNORR":{
"ÇÖREKOTU":2000,
"HİNDİSTAN CEVİZİ":2000,
"KARABİBER":5000,
"KARANFİL":500,
"KEKİK":2500,
"KİMYON":3000,
"KÖRİ":2000,
"NANE":2000,
"PANKO":5000,
"PUL BİBER":5000,
"TARÇIN":2000,
"TATLI TOZ BİBER":5000,
"ZENCEFİL":2000,
"ZERDEÇAL":3000
}

};

let selectedFirm = null;
let selectedProduct = null;

function speak(text){
    let msg = new SpeechSynthesisUtterance(text);
    msg.lang = "tr-TR";
    speechSynthesis.speak(msg);
}

function normalize(text){
    return text.toUpperCase()
        .replace("ZENCEFIL","ZENCEFİL")
        .replace("ÇÖREK OTU","ÇÖREKOTU");
}

function showFirms(){
    let div = document.getElementById("firms");
    div.innerHTML = "<h2>HANGİ FİRMA İLE İŞLEM YAPMAK İSTİYORSUNUZ?</h2>";
    for(let firm in data){
        div.innerHTML += `<button onclick="selectFirm('${firm}')">${firm}</button>`;
    }
}

function selectFirm(firm){
    selectedFirm = firm;
    document.getElementById("products").innerHTML="";
    document.getElementById("controls").innerHTML="";
    document.getElementById("result").innerHTML="";
    listProducts();
    speak(firm + " firması seçildi. Hangi hammaddeyi sormak istiyorsunuz?");
}

function listProducts(){
    let div = document.getElementById("products");
    div.innerHTML="";
    for(let product in data[selectedFirm]){
        div.innerHTML += `<div class="card" onclick="selectProduct('${product}')">${product}</div>`;
    }
}

function selectProduct(product){
    selectedProduct = product;
    document.getElementById("controls").innerHTML=
    `
    <h3>${product} seçildi</h3>
    <button onclick="askStockVoice()">Sesli Stok Gir</button>
    <input type="number" id="manualStock" placeholder="Manuel KG gir">
    <button onclick="calculateManual()">Hesapla</button>
    `;
    speak(product + " için depodaki stok miktarı nedir?");
}

function askStockVoice(){
    const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    rec.lang="tr-TR";
    rec.start();

    rec.onresult=function(event){
        let spoken = event.results[0][0].transcript;
        let number = parseFloat(spoken.replace(",","."));
        calculate(number);
    }
}

function calculateManual(){
    let val = parseFloat(document.getElementById("manualStock").value);
    calculate(val);
}

function calculate(currentStock){

    let min = data[selectedFirm][selectedProduct];

    if(!min || min<=0){
        alert("Bu ürün için minimum kapasite tanımlı değil.");
        return;
    }

    let diff = min - currentStock;

    if(diff <= 0){
        document.getElementById("result").innerHTML="STOK YETERLİ";
        speak("Stok yeterli.");
        return;
    }

    let ton = (diff/1000).toFixed(0);

    let message = ton + " TON SİPARİŞ VERMELİSİN.";

    document.getElementById("result").innerHTML=message;
    speak(message);
}

showFirms();

</script>

</body>
</html>
