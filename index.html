<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Stok Asistan覺 Ultimate</title>
<style>
body{margin:0;font-family:Arial;background:#0f172a;color:white;text-align:center;padding:15px}
h2{margin-top:10px}
button{font-size:20px;padding:18px;border-radius:14px;border:none;background:#22c55e;color:white;width:95%;max-width:500px;margin-top:15px}
#response{margin-top:20px;background:#1e293b;padding:20px;border-radius:12px;min-height:100px;font-size:18px}
#debug{margin-top:10px;font-size:12px;color:#94a3b8}
</style>
</head>
<body>
<h2> AI Stok Asistan覺 Ultimate</h2>
<button onclick="startListening()">Konu</button>
<div id="response">Haz覺r覺m...</div>
<div id="debug"></div>
<script>
const stockData={
"BIM":{"KARABIBER":30000,"KEKIK":15000,"PUL BIBER":80000},
"METRO":{"KEKIK":2500,"PUL BIBER":20000},
"KNORR":{"PUL BIBER":5000,"KARABIBER":5000}
};
let memory={firm:null,product:null,lastStock:null};
function normalize(t){
return t.toUpperCase()
.replace(//g,"C").replace(//g,"G").replace(/襤/g,"I")
.replace(//g,"S").replace(//g,"O").replace(//g,"U")
.replace(/,/g,".").replace(/[^A-Z0-9. ]/g,"")
}
function speak(text){
document.getElementById("response").innerText=text;
const synth=window.speechSynthesis;
const utter=new SpeechSynthesisUtterance(text);
utter.lang="tr-TR";
utter.rate=1;
function loadVoices(){
let voices=synth.getVoices();
if(voices.length>0){
utter.voice=voices.find(v=>v.lang==="tr-TR")||voices[0];
synth.speak(utter);
}}
if(synth.getVoices().length>0){loadVoices();}
else{synth.onvoiceschanged=loadVoices;}
}
function getRisk(min,stock){
let r=stock/min;
if(r<0.5)return"kritik seviyede";
if(r<0.8)return"riskli seviyede";
if(r<1)return"sinirda";
return"guvenli seviyede";
}
function detectFirm(text){
for(let f in stockData){
if(text.includes(f)) return f;
}
return null;
}
function detectProduct(text,firm){
if(!firm) return null;
for(let p in stockData[firm]){
let words=p.split(" ");
let matchCount=0;
words.forEach(w=>{ if(text.includes(w)) matchCount++; });
if(matchCount>=words.length-1) return p;
}
return null;
}
function startListening(){
if(!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)){
alert("Taray覺c覺 ses tan覺may覺 desteklemiyor.");
return;
}
const rec=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
rec.lang="tr-TR";
rec.start();
rec.onresult=function(e){
let raw=e.results[0][0].transcript;
document.getElementById("debug").innerText="Alg覺lanan: "+raw;
processCommand(raw);
}
}
function processCommand(raw){
let text=normalize(raw);
let firm=detectFirm(text);
if(firm) memory.firm=firm;
let product=detectProduct(text,memory.firm);
if(product) memory.product=product;
if(!memory.firm||!memory.product){
speak("Firma ve urun belirtir misiniz?");
return;
}
let minimum=stockData[memory.firm][memory.product];
if(text.includes("MINIMUM")||text.includes("KAPASITE")){
speak(memory.firm+" "+memory.product+" minimum kapasitesi "+(minimum/1000)+" ton.");
return;
}
let matchTon=text.match(/(\d+(\.\d+)?)\s*TON/);
let stock=0;
if(matchTon){stock=parseFloat(matchTon[1])*1000;}
if(stock>0){
memory.lastStock=stock;
let risk=getRisk(minimum,stock);
if(stock<minimum){
let eksik=((minimum-stock)/1000).toFixed(2);
speak("Minimum "+(minimum/1000)+" ton. Mevcut "+(stock/1000)+" ton. Durum "+risk+". "+eksik+" ton siparis oneriyorum.");
}else{
speak("Minimum "+(minimum/1000)+" ton. Mevcut "+(stock/1000)+" ton. Stok "+risk+". Siparis gerekmiyor.");
}
return;
}
if(text.includes("DURUM")||text.includes("AZ")||text.includes("RISK")){
if(memory.lastStock){
let risk=getRisk(minimum,memory.lastStock);
speak("Son bildirilen stok miktarina gore durum "+risk+".");
}else{
speak("Stok miktari belirtmediniz.");
}
return;
}
speak("Komutu anlayamadim. Lutfen stok miktari veya minimum sorgusu yapin.");
}
</script>
</body>
</html>
